היתרון המרכזי של עץ החלטה הוא פשטות ההבנה והפרשנות שלו — במיוחד בנתונים רפואיים כמו כאן.

יתרונות עיקריים:

קל לפרש – הרופא יכול להבין "אם לחץ הדם מעל X והגיל מעל Y – הסיכון גבוה".
מטפל היטב גם בנתונים קטגוריים וגם רציפים.
אינו דורש הנחות מוקדמות על מבנה הנתונים (כמו רגרסיה).
נותן תובנות ברורות על אילו משתנים חשובים בקבלת החלטה רפואית.

//////////////////////////////////////////////////////////////////////////


עץ החלטה נוטה "ללמוד את הנתונים בעל-פה", במיוחד כשהוא עמוק מדי. זה נקרא התאמת יתר (Overfitting).
שיטות למניעת Overfitting:

הגבלת עומק העץ (max_depth) – מגבילה את מספר רמות הפיצול.
הגדרת min_samples_split או min_samples_leaf – מונעת פיצולים על קבוצות קטנות מדי.
גיזום (Pruning) – הסרה של ענפים מיותרים לאחר האימון.
שימוש ב-Cross Validation – להבטיח שהביצועים עקביים.
שימוש באנסמבלים – כמו Random Forest שממוצע כמה עצים ומונע Overfitting.

clf = DecisionTreeClassifier(max_depth=4, min_samples_leaf=5, random_state=42) דוגמא:

///////////////////////////////////////////////////////////////////////////

2.3 מגבלות אפשריות של אשכולות K-means בתרחיש זה

1. רגישות לקנה מידה של הנתונים
K-means משתמש במדד המרחק האוקלידי, ולכן תלוי מאוד בקנה המידה של המאפיינים.
מאפיינים עם טווח ערכים גדול (למשל גיל לעומת ערכי ביטול בינאריים) ישפיעו יותר על האשכולות אם לא מבצעים נרמול.
נרמול/תקנון הוא חובה לפני הריצה, אחרת התוצאה לא מהימנה.

2. התאמה רק למבנה אשכולות כדוריים (עגולים)
K-means מניח שכל אשכול הוא כדורי סביב מרכז (centroid).
במציאות, אשכולות במאגר רפואי יכולים להיות בעלי צורה מורכבת (אליפטית, לא סדירה).
לכן, K-means עלול לטעות ולשלב נתונים מאשכולות שונים או לפצל אשכול אמיתי ליותר מאשכול אחד.

3. טיפול בעמודות קטגוריות
K-means מתבסס על מרחקים מספריים, ולכן לא מתאים ישירות לעמודות קטגוריות.
יש צורך בקידוד (One-Hot או Label Encoding) שיכול לגרום להרחבת ממדיות הנתונים, להשפיע על מרחקים, ולפגוע בתוצאה.

4. בחירת מספר האשכולות K מראש
שיטת המרפק עוזרת, אבל הבחירה נותרת סובייקטיבית ולא תמיד חד-משמעית.
בחירה לא נכונה של K תוביל לתוצאות לא מדויקות ולקבוצות פחות מובהקות.

5. רגישות לנקודות קיצון (Outliers)
K-means רגיש לנקודות קיצון שכן הן יכולות להזיז את מרכז האשכול בצורה לא רצויה.
במאגר רפואי, ערכים חריגים נפוצים וחשוב לטפל בהם מראש.

6. אשכולות באותם גדלים וצפיפות
K-means נוטה לחפש אשכולות עם גודל וצפיפות דומים.
במציאות, יתכן ויש אשכולות גדולים מאוד לצד אשכולות קטנים ונדירים (למשל מקרים חריגים).
K-means לא מתאים תמיד לתרחיש כזה.

/////////////////////////////////////////////////////////////////////

✅ 3.2 פירוש של כלל אסוציאציה לדוגמה

נניח שאחד מהחוקים שנמצאו בתוצאה של association_rules הוא:

antecedents	consequents	support	confidence	lift
{yogurt}	{whole milk}	0.08	0.65	1.4
✍️ פירוש:
מבין כל העסקאות שבהן נרכש יוגורט, ב־65% מהמקרים גם נרכש חלב מלא.
כלל זה מופיע ב־8% מכלל העסקאות (כלומר בערך 787 פעמים).
הקשר בין שני הפריטים חזק מהממוצע (Lift = 1.4 > 1), ולכן יש קשר חיובי מובהק ביניהם.
🧠 מסקנה:
לקוחות שקונים יוגורט נוטים מאוד לקנות גם חלב מלא — זהו הרגל צרכני שניתן לנצל.

✅ 3.4 יישום מעשי של כללי אסוציאציה בעולם הקמעונאות

כללי אסוציאציה הם כלי עוצמתי לניתוח התנהגות קנייה. הנה מספר יישומים פרקטיים:

🛍️ 1. שיווק ומבצעים משולבים
דוגמה: אם "לקוחות שקונים לחמניות קונים גם חמאה", המרכול יכול להציע מבצע משולב (1+1 או הנחה בקניית שניהם).
מגביר מכירות וחוויית לקוח.
🛒 2. סידור חכם של חנויות (Merchandising)
אם יוגורט וחלב נקנים יחד, ניתן למקם אותם קרוב זה לזה במדפים.
מקצר את מסלול הלקוח, מעלה מכירות אימפולסיביות.
📦 3. המלצות אישיות (Recommender Systems)
כמו באמזון: "לקוחות שקנו X קנו גם Y".
אפשר להציג המלצות ללקוח בקופה או באפליקציה של המרכול.
📊 4. ניהול מלאי
מאפשר לזהות פריטים שנוטים להימכר יחד ולתכנן מלאי בהתאם (למנוע חוסרים או עודפים).
לדוגמה: אם מכירת יין עולה כשיש מבצע על גבינות, נגדיל את מלאי היין.